# Quiz Audit: Nova Requirements vs Current Quiz

## Executive Summary

**Status:** üü° CRITICAL GAPS FOUND

**Missing from Quiz:**
1. ‚ùå **Gender** (absoluut noodzakelijk!)
2. ‚ùå **Body Type** (voor fit adviezen)
3. ‚ùå **Maten** (tops, broeken, schoenen)
4. ‚ùå **Budget range** (min/max per item)
5. ‚ùå **Preferred brands** (Nike, Adidas, etc.)
6. ‚ö†Ô∏è **Age range** (optional maar waardevol)

---

## What Nova NEEDS vs What Quiz ASKS

### 1. Gender (CRITICAL) ‚ùå MISSING

**Why Nova needs it:**
```typescript
// Nova prompt line 334-343:
KRITIEKE REGEL - GENDER:
${!userContext.gender ? `
‚ö†Ô∏è GENDER IS ONBEKEND - MAAK GEEN AANNAMES!
- Vraag EERST: "Voor wie zoek je een outfit?"
- Gebruik gender-neutrale taal tot bevestigd
` : `
‚úÖ Gender bekend: ${userContext.gender}
- Pas taalgebruik aan (hij/zij/hen)
- Filter producten op juiste categorie
`}
```

**Current quiz:** ‚ùå Vraagt NIET naar gender

**Impact:**
- Nova weet niet of het heren/dames/unisex moet adviseren
- Moet elke keer vragen "voor wie is dit?"
- Kan niet filteren op product gender

**Solution:** Voeg toe als EERSTE quiz stap (na intro)

---

### 2. Body Type (HIGH PRIORITY) ‚ùå MISSING

**Why Nova needs it:**
```typescript
// Nova uses for fit recommendations:
- "Voor jouw inverted triangle lichaam raad ik..."
- "Dit oversized shirt balanceert je shoulders..."
```

**Current quiz:** ‚ùå Vraagt alleen "fit preference" (slim/relaxed)

**Fit ‚â† Body Type:**
- Fit = HOE je graag draagt (loose/tight)
- Body Type = WELKE vorm je hebt (athletic/pear/rectangle)

**Impact:**
- Nova kan geen lichaamsvorm-specifieke adviezen geven
- Mist belangrijke fit guidance ("avoid skinny jeans for inverted triangle")

**Solution:** Voeg body type vraag toe

---

### 3. Sizes (MEDIUM PRIORITY) ‚ùå MISSING

**Why Nova needs it:**
```typescript
// Nova could say:
"Voor jouw maat M top raad ik aan..."
"Deze M shirt past je perfect"
```

**Current quiz:** ‚ùå Vraagt NIET naar maten

**Impact:**
- Nova kan niet filteren op beschikbare maten
- Kan niet waarschuwen: "Let op: dit merk valt klein"
- Geen size-specific product links

**Solution:** Vraag: tops (XS-XXL), broeken (28-38), schoenen (39-46)

---

### 4. Budget (MEDIUM PRIORITY) ‚ùå MISSING

**Why Nova needs it:**
```typescript
// Nova could filter:
"Gezien je budget ‚Ç¨50-150 raad ik aan..."
"Deze items zijn binnen je budget"
```

**Current quiz:** ‚ùå Vraagt NIET naar budget

**Impact:**
- Nova kan dure items aanbevelen (‚Ç¨300 jas)
- Geen prijs-bewuste filtering
- Mist kans om "affordable" vs "premium" te targeten

**Solution:** Vraag budget range met sliders/presets

---

### 5. Preferred Brands (LOW PRIORITY) ‚ùå MISSING

**Why Nova needs it:**
```typescript
// Nova could say:
"Van je favoriete merk Nike raad ik aan..."
"Gezien je houdt van minimalist merken: COS, Uniqlo"
```

**Current quiz:** ‚ùå Vraagt NIET naar merken

**Impact:**
- Mist personalisatie kans
- Kan niet targeteren op merkvoorkeur
- Geen "avoid fast fashion" filtering

**Solution:** Optionele multi-select van populaire merken

---

### 6. Age Range (OPTIONAL) ‚ö†Ô∏è MISSING

**Why useful:**
```typescript
// Nova could adjust tone/style:
"Voor je leeftijd (25-35) past deze modern-classic mix..."
```

**Current quiz:** ‚ùå Vraagt NIET naar leeftijd

**Impact:**
- Mist context voor age-appropriate stijl
- Kan teenage vs executive vs retired niet onderscheiden

**Solution:** Optioneel, ranges (18-25, 25-35, 35-45, 45+)

---

## Current Quiz Data (What We HAVE)

### ‚úÖ Good Data Points:

1. **Style Preferences:**
   - goals (werk/casual/avond/sport) ‚úÖ
   - fit preference (slim/relaxed) ‚úÖ
   - comfort level (structured/balanced/relaxed) ‚úÖ
   - occasions (office/smartcasual/leisure) ‚úÖ

2. **Color Profile:**
   - jewelry (goud/zilver) ‚Üí undertone ‚úÖ
   - neutrals preference (warm/koel/neutraal) ‚úÖ
   - lightness (licht/medium/donker) ‚úÖ
   - contrast (laag/medium/hoog) ‚úÖ
   - prints (effen/subtiel/statement) ‚úÖ
   - materials (mat/textuur/glans) ‚úÖ

3. **Photo:**
   - photoDataUrl (optional) ‚úÖ
   - Triggers AI color analysis ‚úÖ

### ‚ùå Missing Critical Data:

1. **Gender** ‚ùå
2. **Body Type** ‚ùå
3. **Sizes** ‚ùå
4. **Budget** ‚ùå
5. **Brands** ‚ùå
6. **Age** ‚ö†Ô∏è

---

## Nova's Actual Context (from nova.ts)

```typescript
interface UserContext {
  gender?: "male" | "female" | "non-binary" | "prefer-not-to-say"; // ‚ùå NOT IN QUIZ
  archetype?: string;                                                // ‚úÖ Computed
  bodyType?: string;                                                 // ‚ùå NOT IN QUIZ
  stylePreferences?: string[];                                       // ‚úÖ From goals
  occasions?: string[];                                              // ‚úÖ From occasions
  undertone?: "warm" | "cool" | "neutral";                           // ‚úÖ From jewelry
  sizes?: { tops: string; bottoms: string; shoes: string };         // ‚ùå NOT IN QUIZ
  budget?: { min: number; max: number };                             // ‚ùå NOT IN QUIZ
  baseColors?: string;                                               // ‚úÖ From neutrals
  preferredBrands?: string[];                                        // ‚ùå NOT IN QUIZ
  allQuizAnswers?: Record<string, any>;                              // ‚úÖ Everything
  aiColorAnalysis?: AIColorAnalysis;                                 // ‚úÖ From photo
}
```

**Score: 5/12 fields populated** (42%)

---

## Recommended Quiz Improvements

### Priority 1: CRITICAL (Add Immediately)

**1. Gender Selection (new first step)**
```typescript
{
  step: "gender",
  question: "Voor wie is deze stijlanalyse?",
  choices: [
    { value: "male", label: "Heren" },
    { value: "female", label: "Dames" },
    { value: "non-binary", label: "Non-binair" },
    { value: "prefer-not-to-say", label: "Zeg ik liever niet" }
  ]
}
```

**2. Body Type (after fit)**
```typescript
{
  step: "bodytype",
  question: "Welke lichaamsvorm past het beste bij jou?",
  help: "Dit helpt ons om kleding te adviseren die jouw vorm flatteert",
  choices: [
    // For male:
    { value: "rectangle", label: "Rechthoek", help: "Schouders en heupen ongeveer even breed" },
    { value: "triangle", label: "Driehoek", help: "Bredere heupen dan schouders" },
    { value: "inverted_triangle", label: "Omgekeerde driehoek", help: "Bredere schouders dan heupen" },
    { value: "oval", label: "Ovaal", help: "Gewicht rond middel" },

    // For female:
    { value: "hourglass", label: "Zandloper", help: "Schouders en heupen even breed, smalle taille" },
    { value: "pear", label: "Peer", help: "Bredere heupen dan schouders" },
    { value: "apple", label: "Appel", help: "Bredere schouders, gewicht rond middel" },
    { value: "rectangle", label: "Rechthoek", help: "Rechte lijnen, weinig taille" },
    { value: "inverted_triangle", label: "Omgekeerde driehoek", help: "Brede schouders" }
  ]
}
```

---

### Priority 2: HIGH VALUE (Add This Week)

**3. Sizes (after bodytype)**
```typescript
{
  step: "sizes",
  question: "Wat zijn je maten?",
  help: "Dit helpt ons om producten in jouw maat te vinden",
  fields: [
    {
      name: "size_tops",
      label: "Tops (T-shirts, shirts)",
      options: ["XS", "S", "M", "L", "XL", "XXL"]
    },
    {
      name: "size_bottoms",
      label: "Broeken (waist)",
      options: ["28", "30", "31", "32", "33", "34", "36", "38", "40"]
    },
    {
      name: "size_shoes",
      label: "Schoenen (EU)",
      options: ["39", "40", "41", "42", "43", "44", "45", "46"]
    }
  ]
}
```

**4. Budget (after sizes)**
```typescript
{
  step: "budget",
  question: "Wat is je budget per item?",
  help: "We filteren producten binnen jouw bereik",
  type: "range",
  options: [
    { value: { min: 0, max: 50 }, label: "Budget (‚Ç¨0-50)" },
    { value: { min: 50, max: 150 }, label: "Betaalbaar (‚Ç¨50-150)" },
    { value: { min: 150, max: 300 }, label: "Premium (‚Ç¨150-300)" },
    { value: { min: 300, max: 999 }, label: "Luxe (‚Ç¨300+)" }
  ]
}
```

---

### Priority 3: NICE TO HAVE (Add Later)

**5. Preferred Brands (optional, after budget)**
```typescript
{
  step: "brands",
  question: "Heb je favoriete merken? (optioneel)",
  help: "We geven dit mee aan Nova voor gepersonaliseerde aanbevelingen",
  multiple: true,
  searchable: true,
  choices: [
    { value: "nike", label: "Nike" },
    { value: "adidas", label: "Adidas" },
    { value: "uniqlo", label: "Uniqlo" },
    { value: "cos", label: "COS" },
    { value: "zara", label: "Zara" },
    { value: "hm", label: "H&M" },
    { value: "arket", label: "Arket" },
    { value: "weekday", label: "Weekday" },
    // ... meer merken
  ]
}
```

**6. Age Range (optional)**
```typescript
{
  step: "age",
  question: "In welke leeftijdscategorie val je? (optioneel)",
  help: "Dit helpt ons om age-appropriate stijl te adviseren",
  choices: [
    { value: "18-24", label: "18-24 jaar" },
    { value: "25-34", label: "25-34 jaar" },
    { value: "35-44", label: "35-44 jaar" },
    { value: "45-54", label: "45-54 jaar" },
    { value: "55+", label: "55+ jaar" },
    { value: "prefer-not-to-say", label: "Zeg ik liever niet" }
  ]
}
```

---

## Updated Quiz Flow

### Current Flow (11 steps):
```
intro ‚Üí goals ‚Üí fit ‚Üí comfort ‚Üí jewelry ‚Üí neutrals ‚Üí
lightness ‚Üí contrast ‚Üí prints ‚Üí materials ‚Üí occasions ‚Üí
photo ‚Üí review
```

### Recommended Flow (17 steps):
```
intro ‚Üí
üÜï gender (CRITICAL) ‚Üí
goals ‚Üí
fit ‚Üí
üÜï bodytype (CRITICAL) ‚Üí
üÜï sizes (HIGH) ‚Üí
üÜï budget (HIGH) ‚Üí
comfort ‚Üí
jewelry ‚Üí
neutrals ‚Üí
lightness ‚Üí
contrast ‚Üí
prints ‚Üí
materials ‚Üí
occasions ‚Üí
üÜï brands (OPTIONAL) ‚Üí
üÜï age (OPTIONAL) ‚Üí
photo ‚Üí
review
```

**Total: 17 steps (~10 min)**

---

## Implementation Checklist

### Phase 1: Critical (This Week)
- [ ] Add gender step (first question)
- [ ] Add bodytype step (after fit)
- [ ] Update AnswerMap type
- [ ] Update quiz logic to compute/store gender + bodytype
- [ ] Update userContext to send gender + bodytype headers
- [ ] Test Nova receives gender + bodytype

### Phase 2: High Value (Next Week)
- [ ] Add sizes step (tops/bottoms/shoes)
- [ ] Add budget step (ranges)
- [ ] Update data flow
- [ ] Test Nova uses size/budget in recommendations

### Phase 3: Nice to Have (Future)
- [ ] Add brands multi-select (optional)
- [ ] Add age range (optional)
- [ ] Progressive disclosure (skip if quick quiz wanted)

---

## Expected Nova Improvement

### Before (Current):
```
User: "Outfit voor date vrijdag"
Nova: "Wat voor stijl vind je mooi?"
      "Wat voor kleuren?"
      ‚Üí Generic advice
```

### After (With Complete Quiz):
```
User: "Outfit voor date vrijdag"
Nova: "Voor jouw inverted triangle lichaam en autumn kleuren
       raad ik aan (binnen je ‚Ç¨50-150 budget):

       üé® Camel chino (‚Ç¨89, maat 32)
          Past bij je warme ondertoon!

       üé® Olijfgroen overhemd (‚Ç¨45, maat M)
          Van Nike (je favoriete merk!)
          Autumn palette - flatteert je haar

       üé® Cream sneakers (‚Ç¨120)
          Balanceert je bovenlijf perfect"
```

**Improvement:**
- ‚úÖ Gender-appropriate products
- ‚úÖ Body-type specific fit advice
- ‚úÖ Correct sizes linked
- ‚úÖ Budget-filtered
- ‚úÖ Brand personalization
- ‚úÖ AI color matched

---

## Data Flow After Implementation

```
Quiz Completion
  ‚Üì
Saves to localStorage + Supabase:
  - gender ‚úÖ
  - bodyType ‚úÖ
  - sizes ‚úÖ
  - budget ‚úÖ
  - brands ‚úÖ
  - age ‚úÖ
  - ... existing data
  ‚Üì
fetchUserContext() loads ALL data
  ‚Üì
Sends via headers:
  x-fitfi-gender
  x-fitfi-bodytype
  x-fitfi-sizes
  x-fitfi-budget
  x-fitfi-brands
  x-fitfi-age
  x-fitfi-coloranalysis (from photo)
  x-fitfi-quiz (fallback with everything)
  ‚Üì
Nova OpenAI prompt includes:
  "Gender: male
   Body type: inverted_triangle
   Sizes: M top, 32 waist, 42 shoes
   Budget: ‚Ç¨50-150
   Brands: Nike, Adidas
   AI Analysis: autumn, warm undertone, best colors: olive/camel/rust"
  ‚Üì
Nova gives PRECISE, PERSONALIZED advice! üéØ
```

---

## Summary

**Current State:** üü°
- Quiz gives 42% of needed data
- Nova has to ask follow-up questions
- Generic recommendations

**After Implementation:** üü¢
- Quiz gives 100% of needed data
- Nova gives instant personalized advice
- Precise size/budget/brand/body-type matched recommendations

**Priority Order:**
1. Gender (ABSOLUTE MUST) ‚Üê Do first!
2. Body Type (HIGH VALUE) ‚Üê Do second!
3. Sizes (MEDIUM)
4. Budget (MEDIUM)
5. Brands (LOW)
6. Age (LOW)

**Estimated Implementation Time:**
- Phase 1 (gender + bodytype): 2-3 hours
- Phase 2 (sizes + budget): 2-3 hours
- Phase 3 (brands + age): 1-2 hours
- **Total: ~6-8 hours**

**Business Impact:**
- Better Nova recommendations = Higher conversion
- Less back-and-forth = Better UX
- Complete profiles = More personalization = Premium perception

---

**RECOMMENDATION: Start with Phase 1 (gender + bodytype) TODAY!** üöÄ
