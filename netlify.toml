# netlify.toml â€” FitFi

[build]
  command   = "npm run build"
  publish   = "dist"
  functions = "netlify/functions"

[build.environment]
  NODE_VERSION = "20.19.0"
  NPM_FLAGS    = "--no-audit --no-fund"

[functions]
  node_bundler = "esbuild"
  external_node_modules = []
  included_files = []

# Per-function settings (SSE nova)
[functions."nova"]
  timeout = 30
  memory  = 1024

# Zorg dat Functions niet door de SPA-rewrite worden opgeslokt
[[redirects]]
  from   = "/.netlify/functions/*"
  to     = "/.netlify/functions/:splat"
  status = 200

# Single Page App fallback
[[redirects]]
  from   = "/*"
  to     = "/index.html"
  status = 200

# Extra headers voor SSE endpoint (Content-Type zet je in de functie zelf)
[[headers]]
  for = "/.netlify/functions/nova"
  [headers.values]
    Access-Control-Allow-Origin = "*"
    Cache-Control = "no-cache"